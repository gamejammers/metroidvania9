//
// (c) BLACKTRIANGLES 2020
// http://www.blacktriangles.com
//
// Lifted from webgl-noise written by Stefan Gustavson and Ahima Arts:
//  https://github.com/ashima/webgl-noise

float4 mod(float4 x, float4 y)
{
  return x - y * floor(x / y);
}

//
// ----------------------------------------------------------------------------
//

float3 mod289(float3 x)
{
  return x - floor(x / 289.0) * 289.0;
}

//
// ----------------------------------------------------------------------------
//

float4 mod289(float4 x)
{
  return x - floor(x / 289.0) * 289.0;
}

//
// ----------------------------------------------------------------------------
//

float4 permute(float4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

//
// ----------------------------------------------------------------------------
//

float4 taylorInvSqrt(float4 r)
{
  return (float4)1.79284291400159 - r * 0.85373472095314;
}

//
// ----------------------------------------------------------------------------
//

float2 fade(float2 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

//
// ----------------------------------------------------------------------------
//

float3 fade(float3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

//
// ----------------------------------------------------------------------------
//

float fract( float n ) {
    return n - floor(n);
}

//
// ----------------------------------------------------------------------------
//

float rnd ( float n ) { 
    return fract(sin(float(n)*543.21)*43758.5453);
} 

//
// ----------------------------------------------------------------------------
//

float srnd( float n ) {
    return 1-2*fract(sin(float(n)*543.21)*43758.5453);
}

//
// ----------------------------------------------------------------------------
//

float srnd( float3 n ) {
    return float3(
        srnd(n.x),
        srnd(n.y),
        srnd(n.z)
    );
}

//
// ----------------------------------------------------------------------------
//

float srnd( float4 n ) {
    return float4(
        srnd(n.x),
        srnd(n.y),
        srnd(n.z),
        srnd(n.w)
    );
}
